<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Memory Match Game</title>
    <style>
      body {
        margin: 0;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f5f9fc;
        padding: 20px;
      }

      .game-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        max-width: 500px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .header {
        text-align: center;
        margin-bottom: 20px;
      }

      .header h1 {
        font-size: 24px;
        color: #444;
        margin: 0 0 10px 0;
      }

      .stats {
        display: flex;
        justify-content: space-between;
        width: 100%;
        margin-bottom: 20px;
      }

      .stat {
        background: #f0f4ff;
        padding: 10px 15px;
        border-radius: 8px;
        font-weight: bold;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        width: 100%;
      }

      .card {
        position: relative;
        height: 80px;
        cursor: pointer;
        perspective: 1000px;
      }

      .card-inner {
        position: absolute;
        width: 100%;
        height: 100%;
        transition: transform 0.6s;
        transform-style: preserve-3d;
      }

      .card.flipped .card-inner {
        transform: rotateY(180deg);
      }

      .card-front,
      .card-back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      .card-front {
        background: linear-gradient(135deg, #6e8efb, #a777e3);
        color: white;
        font-size: 24px;
        font-weight: bold;
      }

      .card-back {
        background: white;
        transform: rotateY(180deg);
        font-size: 32px;
      }

      .card.matched .card-back {
        background: linear-gradient(135deg, #43e97b, #38f9d7);
      }

      .button {
        background: linear-gradient(135deg, #6e8efb, #a777e3);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        margin-top: 20px;
        font-size: 16px;
      }

      .complete-message {
        background: #fdf9c4;
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        margin: 15px 0;
        font-weight: bold;
        color: #806d00;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div id="game-container" class="game-container">
      <div class="header">
        <h1>Memory Match</h1>
      </div>

      <div class="stats">
        <div class="stat" id="moves">Moves: 0</div>
        <div class="stat" id="timer">Time: 00:00</div>
      </div>

      <div id="complete-message" style="display: none" class="complete-message">
        <p>Game Complete! ðŸŽ‰</p>
        <p id="complete-stats">Finished in 00:00 with 0 moves</p>
      </div>

      <div id="grid" class="grid">
        <!-- Cards will be generated by JavaScript -->
      </div>

      <button class="button" id="reset-button">New Game</button>
      <button
        class="button"
        id="next-game-button"
        style="
          margin-top: 10px;
          background: linear-gradient(135deg, #43e97b, #38f9d7);
        "
      >
        Next Game
      </button>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Card symbols using emoji for matching pairs
        const cardSymbols = ["ðŸŽ", "ðŸŒ", "ðŸ‡", "ðŸŠ", "ðŸ“", "ðŸ¥‘"]

        // Game state variables
        let cards = []
        let flipped = []
        let matched = []
        let moves = 0
        let timer = 0
        let isPlaying = false
        let gameComplete = false
        let timerInterval

        // DOM elements
        const gridElement = document.getElementById("grid")
        const movesElement = document.getElementById("moves")
        const timerElement = document.getElementById("timer")
        const resetButton = document.getElementById("reset-button")
        const completeMessage = document.getElementById("complete-message")
        const completeStats = document.getElementById("complete-stats")

        // Format time to MM:SS
        const formatTime = (seconds) => {
          const mins = Math.floor(seconds / 60)
          const secs = seconds % 60
          return `${mins.toString().padStart(2, "0")}:${secs
            .toString()
            .padStart(2, "0")}`
        }

        // Initialize the game
        const initializeGame = () => {
          // Reset game state
          flipped = []
          matched = []
          moves = 0
          timer = 0
          gameComplete = false

          // Clear the grid
          gridElement.innerHTML = ""

          // Update UI
          movesElement.textContent = `Moves: ${moves}`
          timerElement.textContent = `Time: ${formatTime(timer)}`
          completeMessage.style.display = "none"

          // Create pairs of each symbol
          const duplicatedSymbols = [...cardSymbols, ...cardSymbols]

          // Shuffle the array
          cards = duplicatedSymbols
            .map((symbol) => ({
              id: Math.random(),
              symbol,
            }))
            .sort(() => Math.random() - 0.5)

          // Generate cards in the grid
          cards.forEach((card, index) => {
            const cardElement = document.createElement("div")
            cardElement.className = "card"
            cardElement.dataset.index = index

            cardElement.innerHTML = `
            <div class="card-inner">
              <div class="card-front">?</div>
              <div class="card-back">${card.symbol}</div>
            </div>
          `

            cardElement.addEventListener("click", () => handleCardClick(index))
            gridElement.appendChild(cardElement)
          })

          // Start timer
          startTimer()
        }

        // Start the timer
        const startTimer = () => {
          // Clear any existing timer
          if (timerInterval) {
            clearInterval(timerInterval)
          }

          isPlaying = true

          // Start a new timer
          timerInterval = setInterval(() => {
            timer++
            timerElement.textContent = `Time: ${formatTime(timer)}`
          }, 1000)
        }

        // Stop the timer
        const stopTimer = () => {
          isPlaying = false
          clearInterval(timerInterval)
        }

        // Handle card click
        const handleCardClick = (index) => {
          // Prevent clicking if already two cards are flipped or the card is already matched
          if (
            flipped.length === 2 ||
            flipped.includes(index) ||
            matched.includes(index) ||
            !isPlaying
          )
            return

          // Add card to flipped array
          flipped.push(index)

          // Update card appearance
          const cardElement = document.querySelector(
            `.card[data-index="${index}"]`
          )
          cardElement.classList.add("flipped")

          // Check for match if two cards are flipped
          if (flipped.length === 2) {
            setTimeout(checkForMatch, 700)
          }
        }

        // Check if the two flipped cards match
        const checkForMatch = () => {
          const [firstIndex, secondIndex] = flipped

          // Increment move counter
          moves++
          movesElement.textContent = `Moves: ${moves}`

          if (cards[firstIndex].symbol === cards[secondIndex].symbol) {
            // If cards match, add them to matched array
            matched.push(firstIndex, secondIndex)

            // Update card appearance
            const firstCard = document.querySelector(
              `.card[data-index="${firstIndex}"]`
            )
            const secondCard = document.querySelector(
              `.card[data-index="${secondIndex}"]`
            )
            firstCard.classList.add("matched")
            secondCard.classList.add("matched")

            // Check if game is complete
            if (matched.length === cards.length) {
              gameComplete = true
              completeStats.textContent = `Finished in ${formatTime(
                timer
              )} with ${moves} moves`
              completeMessage.style.display = "block"
              stopTimer()
            }
          } else {
            // If cards don't match, flip them back
            const firstCard = document.querySelector(
              `.card[data-index="${firstIndex}"]`
            )
            const secondCard = document.querySelector(
              `.card[data-index="${secondIndex}"]`
            )

            setTimeout(() => {
              firstCard.classList.remove("flipped")
              secondCard.classList.remove("flipped")
            }, 500)
          }

          // Reset flipped cards
          flipped = []
        }

        // Event listener for reset button
        resetButton.addEventListener("click", initializeGame)

        // Event listener for next game button
        const nextGameButton = document.getElementById("next-game-button")
        nextGameButton.addEventListener("click", () => {
          window.location.href = "/memory.html"
        })

        // Initialize the game when the page loads
        initializeGame()
      })
    </script>
  </body>
</html>
